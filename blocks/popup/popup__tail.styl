/* Popup's tail */
.popup__tail {
    position: absolute;

    font-size: 11px;

    width: 1em;
    height: 1em;
    margin: -1em;
    clip: rect(0,0,0,0); /* Hide until mode setÂ */

    .popup_to_bottom > & {
        top: 0;
        left: 50%;
        margin-left: -.5em;
        clip: rect(-99em, 99em, auto, -99em)
    }

    .popup_to_top > & {
        bottom: 0;
        left: 50%;
        margin-left: -.5em;
        clip: rect(0, 99em, 99em, -99em)
    }

    .popup_to_left > & {
        top: 50%;
        right: 0;
        margin-top: -.5em;
        clip: rect(-99em, 99em, 99em, 0)
    }

    .popup_to_right > & {
        top: 50%;
        left: 0;
        margin-top: -.5em;
        clip: rect(-99em, auto, 99em, -99em)
    }

    &:before {
        content: "";

        position: absolute;
        top: 0;
        left: 0;

        width: 100%;
        height: 100%;

        background: #FFF;

        box-shadow: .2em .2em .8em -.2em #000;
        transform: scale(.65,1) rotate(45deg);

        .popup_to_left > &,
        .popup_to_right > & {
            transform: scale(1,.65) rotate(45deg);
        }

        .popup_to_bottom > & {
            top: 50%;
        }

        .popup_to_top > & {
            top: -50%;
        }

        .popup_to_right > & {
            left: 50%;
        }

        .popup_to_left > & {
            left: -50%;
        }
    }
}
