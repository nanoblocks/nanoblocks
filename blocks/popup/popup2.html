<!DOCTYPE HTML>
<html>
<head>
    <meta charset="UTF-8">
    <title>Попапы и дропдауны</title>
    <link rel="stylesheet" href="../s/all.css">
    <script type="text/javascript" src="http://yandex.st/jquery/1.7.1/jquery.js"></script>
    <script type="text/javascript" src="../../nanoblocks.js"></script>
    <script type="text/javascript" src="popup.js"></script>
</head>
<body>

<script>
    var dirs = [
        { what: 'left top', where: 'left bottom' },
        { dir: 'bottom' },
        { what: 'right top', where: 'right bottom' },
        { what: 'right top', where: 'left top' },
        { dir: 'left' },
        { what: 'right bottom', where: 'left bottom' },
        { what: 'right bottom', where: 'right top' },
        { dir: 'top' },
        { what: 'left bottom', where: 'left top' },
        { what: 'left bottom', where: 'right bottom' },
        { dir: 'right' },
        { what: 'left top', where: 'right top' }
    ];

    nb.define('change-toggler', {

        events: {
            'init': function() {
                this.i = 0;
            },

            'click': function() {
                var popup = nb.find('popup-1');

                if ( $(popup.node).hasClass('_hidden') ) {
                    this.data( 'popup-toggler', JSON.stringify( { id: 'popup-1', how: dirs[this.i] } ) );
                    this.i = (this.i + 1) % dirs.length;
                }
            }
        }

    });
</script>

    <div class="popup popup_dropdown _hidden" data-nb="popup" id="popup-1">
        <div class="popup__tail"></div>
        <a href="#" class="popup__line link">Попап</a>
        <a href="#" class="popup__line link">Какое-то меню</a>
        <a href="#" class="popup__line link">Ололололо</a>
        <div class="popup__hr"></div>
        <a href="#" class="popup__line link">И ещё пункт</a>
        <a class="popup__line link link_wrapper link_pseudo popup__close"><span class="link__inner">Закрыть</span></a>
    </div>

    <div style="margin-top: 100px">
        <div style="position: absolute; left: 100px; width: 15px; height: 15px; background: #ccc" data-nb="change-toggler popup-toggler"></div>
        <div style="position: absolute; left: 300px; width: 50px; height: 50px; background: #ccc" data-nb="change-toggler popup-toggler"></div>
        <div style="position: absolute; left: 600px; width: 200px; height: 200px; background: #ccc" data-nb="change-toggler popup-toggler"></div>
    </div>

</body>
</html>

